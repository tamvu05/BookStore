<% 
    const TRANG_THAI = {
        'CHO_XAC_NHAN': 'Chờ xác nhận',
        'DANG_CHUAN_BI_HANG': 'Đang chuẩn bị hàng',
        'DA_GIAO_CHO_DON_VI_VAN_CHUYEN': 'Đã giao cho đơn vị vận chuyển',
        'DA_GIAO': 'Đã giao hàng',
        'DA_HUY': 'Đã hủy',
    }

    const THANH_TOAN = {
        'CHUA_THANH_TOAN': 'Chưa thanh toán',
        'CHO_THANH_TOAN': 'Chờ thanh toán',
        'DA_THANH_TOAN': 'Đã thanh toán',
    }
%>

<div id="data-attribute"     data-current-page="<%= currentPage %>"     data-total-page="<%= totalPage %>"    
    data-total-item="<%= totalItem %>"     data-total-item-per-page="<%= totalItemPerPage %>"    
    data-page-limit="<%= PAGE_LIMIT %>"></div>

<div class="table-responsive-wrapper">
    <table class="table table-striped table-hover align-middle">
        <thead>
            <tr>
                <th>Mã</th>
                <th>Ngày tạo</th>
                <th>Điện thoại</th>
                <th>Hình thức thanh toán</th>
                <th>Tổng tiền</th>
                <th>Trạng thái</th>
                <th class="text-center">Thao tác</th>
            </tr>
        </thead>
        <tbody>

            <% if (orders.length> 0) { %>

                <% orders.forEach((order)=> { %>

                    <tr data-id="<%= order.MaDH %>" data-status="<%= order.TrangThai %>">
                        <td>
                            #DH<%= order.MaDH %>
                        </td>
                        <td class="text-muted">
                            <%= formatTime7(order.NgayDat) %>
                        </td>
                        <td>
                            <%= order.SDT %>
                        </td>
                        <td class="text-muted">
                            <%= order.HinhThucThanhToan %> - <%= THANH_TOAN[order.ThanhToan] %>
                        </td>
                        <td class="text-muted">
                            <%= formatPrice(order.TongTien) %> 
                        </td>
                        <td class="text-muted">
                            <% if (order.TrangThai === 'CHO_XAC_NHAN') { %>
                                <span class="badge bg-warning text-white">Chờ xác nhận</span>
                            <% } else if (order.TrangThai === 'DANG_CHUAN_BI_HANG') { %>
                                <span class="badge bg-info">Đang chuẩn bị</span>
                            <% } else if (order.TrangThai === 'DA_GIAO_CHO_DON_VI_VAN_CHUYEN') { %>
                                <span class="badge bg-info">Đang giao</span>
                            <% } else if (order.TrangThai === 'DA_GIAO') { %>
                                <span class="badge bg-success">Đã giao</span>
                            <% } else if (order.TrangThai === 'CHO_THANH_TOAN') { %>
                            <span class="badge bg-warning text-white">Chờ thanh toán</span>
                            <% } else if (order.TrangThai === 'DA_HUY') { %>
                                <span class="badge bg-danger">Đã hủy</span>
                            <% } %>
                        </td>
                        <td class="action-col text-center">
                            <button class="btn-show-details btn action-btn edit-btn" title="Cập nhật">
                                <i class="fa-regular fa-pen-to-square"></i> 
                            </button>
                            <button class="btn-cancel-order btn action-btn delete-btn" title="Hủy">
                                <i class="fa-solid fa-ban"></i>
                            </button>
                        </td>
                    </tr>
                    <% }) %>
                        <% } else { %>

                            <tr class="no-data">
                                <td colspan="7" class="text-center py-4">
                                    Không có dữ liệu...
                                </td>
                            </tr>

                            <% } %>
        </tbody>
    </table>
</div>
